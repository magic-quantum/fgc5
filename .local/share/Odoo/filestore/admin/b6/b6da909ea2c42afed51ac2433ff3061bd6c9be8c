{
  "id": "00004-007-0031",
  "data": {
    "name": "Order 00004-007-0031",
    "amount_paid": 0,
    "amount_total": 6011.32,
    "amount_tax": 0,
    "amount_return": 0,
    "lines": [
      [
        0,
        0,
        {
          "qty": 2,
          "price_unit": 3000,
          "price_subtotal": 6000,
          "price_subtotal_incl": 6000,
          "discount": 0,
          "product_id": 352,
          "tax_ids": [
            [
              6,
              false,
              []
            ]
          ],
          "id": 90,
          "pack_lot_ids": [],
          "description": "",
          "full_product_name": "\u062c\u0643\u0644\u064a\u062a\u064a\u0629 ",
          "price_extra": 0,
          "customer_note": "",
          "price_manually_set": false,
          "price_automatically_set": false,
          "note": "",
          "uuid": "562162dc-eed2-4204-b3b2-a56ace34dba6",
          "mp_skip": false,
          "sh_line_id": "sh00004-007-0031-90",
          "line_discount": null,
          "sh_discount_code": null,
          "line_note": null,
          "add_section": null,
          "product_weight": 0,
          "product_volume": 0,
          "total_product_weight": 0.04,
          "total_product_volume": false,
          "bag_qty": null,
          "pricelist": false,
          "is_topping": false,
          "sh_is_topping": false,
          "name": "shop_delivery/0120"
        }
      ],
      [
        0,
        0,
        {
          "qty": 4,
          "price_unit": 2.83,
          "price_subtotal": 11.32,
          "price_subtotal_incl": 11.32,
          "discount": 0,
          "product_id": 40,
          "tax_ids": [
            [
              6,
              false,
              []
            ]
          ],
          "id": 92,
          "pack_lot_ids": [],
          "description": "",
          "full_product_name": "Small Shelf",
          "price_extra": 0,
          "customer_note": "",
          "price_manually_set": false,
          "price_automatically_set": false,
          "note": "",
          "uuid": "991cc65a-1fa4-43fa-bb25-f14f4bddfe94",
          "mp_skip": false,
          "sh_line_id": "sh00004-007-0031-92",
          "line_discount": null,
          "sh_discount_code": null,
          "line_note": null,
          "add_section": null,
          "product_weight": 0.01,
          "product_volume": 0,
          "total_product_weight": 0.04,
          "total_product_volume": false,
          "bag_qty": null,
          "pricelist": false,
          "is_topping": false,
          "sh_is_topping": false,
          "name": "shop_delivery/0121"
        }
      ]
    ],
    "statement_ids": [],
    "pos_session_id": 4,
    "pricelist_id": 1,
    "partner_id": 69,
    "user_id": 2,
    "uid": "00004-007-0031",
    "sequence_number": 31,
    "creation_date": "2025-01-21T13:40:06.776Z",
    "fiscal_position_id": false,
    "server_id": false,
    "to_invoice": false,
    "to_ship": false,
    "is_tipped": false,
    "tip_amount": 0,
    "access_token": "00965f25-cd51-4f23-af42-82ed072d1f0b",
    "customer_count": 1,
    "multiprint_resume": "{\"562162dc-eed2-4204-b3b2-a56ace34dba6 - \":{\"line_uuid\":\"562162dc-eed2-4204-b3b2-a56ace34dba6\",\"product_id\":352,\"name\":\"\u062c\u0643\u0644\u064a\u062a\u064a\u0629 \",\"note\":\"\",\"quantity\":2},\"991cc65a-1fa4-43fa-bb25-f14f4bddfe94 - \":{\"line_uuid\":\"991cc65a-1fa4-43fa-bb25-f14f4bddfe94\",\"product_id\":40,\"name\":\"Small Shelf\",\"note\":\"\",\"quantity\":4}}",
    "printing_changes": "{\"new\":[],\"cancelled\":[]}",
    "sh_uid": "00004-007-0031",
    "sh_order_date": "01/21/2025 16:41:29",
    "sh_order_line_id": [
      "sh00004-007-0031-90",
      "sh00004-007-0031-92"
    ],
    "is_return_order": null,
    "is_exchange_order": null,
    "old_pos_reference": null,
    "old_sh_uid": null,
    "order_note": null,
    "signature": "",
    "signature_name": "",
    "signature_date": "",
    "total_product_weight": "0.04",
    "total_product_volume": "0.00"
  },
  "to_invoice": false,
  "traceback": [
    "Traceback (most recent call last):\n",
    "  File \"/opt/odoo/odoo/addons/point_of_sale/models/pos_order.py\", line 942, in create_from_ui\n    order_ids.append(self._process_order(order, draft, False))\n",
    "  File \"/opt/odoo/odoo-custom-addons/sh_pos_all_in_one_retail/sh_pos_order_return_exchange/models/pos_order.py\", line 505, in _process_order\n    order_id = super(PosOrder, self)._process_order(\n",
    "  File \"/opt/odoo/odoo/addons/point_of_sale/models/pos_order.py\", line 131, in _process_order\n    pos_order = self.create(self._order_fields(order))\n",
    "  File \"<decorator-gen-241>\", line 2, in create\n",
    "  File \"/opt/odoo/odoo/odoo/api.py\", line 391, in _model_create_single\n    return create(self, arg)\n",
    "  File \"/opt/odoo/odoo-custom-addons/sh_pos_all_in_one_retail/sh_pos_order_return_exchange/models/pos_order.py\", line 75, in create\n    return super(PosOrder, self).create(vals)\n",
    "  File \"<decorator-gen-227>\", line 2, in create\n",
    "  File \"/opt/odoo/odoo/odoo/api.py\", line 414, in _model_create_multi\n    return create(self, [arg])\n",
    "  File \"/opt/odoo/odoo/addons/point_of_sale/models/pos_order.py\", line 438, in create\n    return super().create(vals_list)\n",
    "  File \"<decorator-gen-136>\", line 2, in create\n",
    "  File \"/opt/odoo/odoo/odoo/api.py\", line 415, in _model_create_multi\n    return create(self, arg)\n",
    "  File \"/opt/odoo/odoo/addons/mail/models/mail_thread.py\", line 258, in create\n    threads = super(MailThread, self).create(vals_list)\n",
    "  File \"<decorator-gen-68>\", line 2, in create\n",
    "  File \"/opt/odoo/odoo/odoo/api.py\", line 415, in _model_create_multi\n    return create(self, arg)\n",
    "  File \"/opt/odoo/odoo/odoo/addons/base/models/ir_fields.py\", line 670, in create\n    recs = super().create(vals_list)\n",
    "  File \"<decorator-gen-15>\", line 2, in create\n",
    "  File \"/opt/odoo/odoo/odoo/api.py\", line 415, in _model_create_multi\n    return create(self, arg)\n",
    "  File \"/opt/odoo/odoo/odoo/models.py\", line 3975, in create\n    records = self._create(data_list)\n",
    "  File \"/opt/odoo/odoo/odoo/models.py\", line 4212, in _create\n    field.create([\n",
    "  File \"/opt/odoo/odoo/odoo/fields.py\", line 4262, in create\n    self.write_batch(record_values, True)\n",
    "  File \"/opt/odoo/odoo/odoo/fields.py\", line 4288, in write_batch\n    return self.write_real(records_commands_list, create)\n",
    "  File \"/opt/odoo/odoo/odoo/fields.py\", line 4487, in write_real\n    flush()\n",
    "  File \"/opt/odoo/odoo/odoo/fields.py\", line 4443, in flush\n    comodel.create(to_create)\n",
    "  File \"<decorator-gen-228>\", line 2, in create\n",
    "  File \"/opt/odoo/odoo/odoo/api.py\", line 415, in _model_create_multi\n    return create(self, arg)\n",
    "  File \"/opt/odoo/odoo/addons/point_of_sale/models/pos_order.py\", line 1242, in create\n    return super().create(vals_list)\n",
    "  File \"<decorator-gen-68>\", line 2, in create\n",
    "  File \"/opt/odoo/odoo/odoo/api.py\", line 415, in _model_create_multi\n    return create(self, arg)\n",
    "  File \"/opt/odoo/odoo/odoo/addons/base/models/ir_fields.py\", line 670, in create\n    recs = super().create(vals_list)\n",
    "  File \"<decorator-gen-15>\", line 2, in create\n",
    "  File \"/opt/odoo/odoo/odoo/api.py\", line 415, in _model_create_multi\n    return create(self, arg)\n",
    "  File \"/opt/odoo/odoo/odoo/models.py\", line 3975, in create\n    records = self._create(data_list)\n",
    "  File \"/opt/odoo/odoo/odoo/models.py\", line 4156, in _create\n    cr.execute(\n",
    "  File \"/opt/odoo/odoo/odoo/sql_db.py\", line 321, in execute\n    res = self._obj.execute(query, params)\n",
    "psycopg2.errors.ForeignKeyViolation: insert or update on table \"pos_order_line\" violates foreign key constraint \"pos_order_line_product_id_fkey\"\nDETAIL:  Key (product_id)=(352) is not present in table \"product_product\".\n\n"
  ]
}