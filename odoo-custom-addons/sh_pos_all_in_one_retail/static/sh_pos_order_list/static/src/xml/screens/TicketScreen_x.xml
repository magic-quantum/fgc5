<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <t t-name="TicketScreen_x" owl="1">
        <div class="templateproductlist-screen screen">
            <div class="screen-content">
                <section class="top-content sh_top_content">


                    <div class="button back sh_service_back_btn" t-on-click="back">
                        <t t-if="!env.isMobile">Discard</t>
                        <t t-else="">
                            <i class="fa fa-undo"></i>
                        </t>
                    </div>

                    <!-- <div class="button back sh_service_back_btn" t-on-click="sh_refresh_order">
                        <t t-if="!env.isMobile">Sync Orders</t>
                        <t t-else="">
                            <i class="fa fa-refresh"></i>
                        </t>
                    </div> -->

                    <!-- <select class='sh-pos-order-filter' t-on-change="ShApplyFilter">
                        <option value="all">All Orders</option>
                        <option value="draft">New</option>
                        <option value="paid">Paid</option>
                        <option value="invoiced">Invoiced</option>
                        <option value="cancel">Cancelled</option>
                    </select> -->
<!-- <div class="sh-pos-order-filter">
    <button t-on-click="ShApplyFilter" class="filter-button" data-filter="">
        <i class="fa fa-list" style="color: gray;"></i> All Orders
    </button>
    <button  t-on-click="ShApplyFilter" class="filter-button" data-filter="draft">
        <i class="fa fa-file" style="color: orange;"></i> New
    </button>
    <button t-on-click="ShApplyFilter" class="filter-button" data-filter="paid">
        <i class="fa fa-credit-card" style="color: green;"></i> Paid
    </button>
    <button t-on-click="ShApplyFilter" class="filter-button" data-filter="invoiced">
        <i class="fa fa-file-text" style="color: blue;"></i> Invoiced
    </button>
    <button t-on-click="ShApplyFilter" class="filter-button" data-filter="cancel">
        <i class="fa fa-times-circle sh_cancel_delete" style="color: red;"></i> Cancelled
    </button>
    <button t-on-click="ShApplyFilter" class="filter-button" data-filter="notsend">
        <i class="fa fa-envelope" style="color: gray;"></i> Not Sent
    </button>
    <button t-on-click="ShApplyFilter" class="filter-button" data-filter="onway">
        <i class="fa fa-truck" style="color: orange;"></i> On Way
    </button>
    <button t-on-click="ShApplyFilter" class="filter-button" data-filter="delivered">
        <i class="fa fa-check-circle" style="color: green;"></i> Delivered
    </button>
</div> -->
<div class="sh-pos-order-filter old-group">
    <button t-on-click="ShApplyFilter" class="filter-button" data-filter="">
        <i class="fa fa-list" style="color: gray;"></i> All
    </button>
    <button t-on-click="ShApplyFilter" class="filter-button" data-filter="notsend">
        <i class="fa fa-envelope" style="color: gray;"></i> Not Send
    </button>
    <button t-on-click="ShApplyFilter" class="filter-button" data-filter="onway">
        <i class="fa fa-truck" style="color: orange;"></i> On Way
    </button>
    <button t-on-click="ShApplyFilter" class="filter-button" data-filter="toters">
        <i class="fa fa-file" style="color: green;"></i> Toters
    </button>
    




    <!-- <button t-on-click="ShApplyFilter" class="filter-button" data-filter="draft">
        <i class="fa fa-file" style="color: orange;"></i> New
    </button> -->
</div>
<div class="sh-pos-order-filter new-group">
    <!-- <button t-on-click="ShApplyFilter" class="filter-button" data-filter="delivered">
        <i class="fa fa-check-circle" style="color: green;"></i> Delivered
    </button> -->
    <button t-on-click="ShApplyFilter" class="filter-button" data-filter="cancel">
        <i class="fa fa-times-circle sh_cancel_delete" style="color: red;"></i> Cancel
    </button>
    <button t-on-click="ShApplyFilter" class="filter-button" data-filter="paid">
        <i class="fa fa-credit-card" style="color: green;"></i> Paid
    </button>
    <button t-on-click="ShApplyFilter" class="filter-button" data-filter="invoiced">
        <i class="fa fa-file-text" style="color: blue;"></i> Invoice
    </button>
</div>





                    <div class="searchbox-client top-content-center sh_searchbox_client_service">
                        <div class="sh_top_bar_search_box">
                            <input placeholder="Search..." size="1" class="sh_pos_order_search" t-on-keyup="updateOrderList" />
                            <span class="search-clear-order-list fa fa-times" t-on-click="Clear_search"></span>
                        </div>
                        <div class="sh_top_bar_date_box">
                            <input type="date" name="date1" id="date1" t-on-change="change_date" />
                        </div>
                    </div>
                </section>
                <section class="full-content sh_full_content_service_management sh_order_list_full_content">
                    <div class="window">
                        <section class="subwindow">
                            <div class="subwindow-container">
                                <div class="subwindow-container-fix touch-scrollable scrollable-y order-list-scroll sh_order_screen">
                                    
                                    
                                    
                                    
                                    
                                    
                                    <table class="template-list sh_order_list">
                                        <thead>
                                            <tr>
                                                <!-- <th class="sh_orderlist_name_th">Name</th> -->
                                                <th class="sh_orderlist_ref_th">Order Ref.</th>
                                                <th class="sh_orderlist_name_th1">Order ID</th>
                                                <th class="sh_orderlist_cust_th">Customer</th>
                                                <t t-if="env.pos.config.floor_ids and env.pos.config.floor_ids.length > 0">
                                                    <th class="sh_orderlist_table_th">Table</th>
                                                </t>
                                                <!-- <th class="x_customer_address">Address</th> -->
                                                <th class="sh_orderlist_ref_th">Address</th>
                                                <!-- <th class="x_customer_address">Customer<br/>Mobile</th> -->
                                                <!-- <th class="x_customer_address">Del<br/>Person</th> -->
                                                <th class="sh_orderlist_name_th">Driver</th>
                                                <!-- <th class="x_customer_address">Del<br/>Status</th> -->
                                                <th class="sh_orderlist_name_th">Delivery</th>
                                                <th class="sh_orderlist_date_th">Date</th>
                                                <th class="sh_orderlist_total_th pos_order_total_header">Total</th>
                                                <!-- <th class="sh_orderlist_state_th pos_order_state_th">State</th> -->
                                                <th class="sh_orderlist_state_th pos_order_state_th">State</th>



                                <t t-if="env.pos.config.sh_enable_order_reprint or env.pos.config.sh_enable_re_order">
                                    <th class="td_cancel_fronted_order"></th>
                                    <!-- <th class="sh_orderlist_blank_th"></th> -->
                                </t>
                                                <t t-if="env.pos.user.groups_id.indexOf(env.pos.config.allow_sh_pos_cancel[0]) != -1">
                                                    <!-- <th></th> -->
                                                    <th class="td_cancel_fronted_order"></th>
                                                </t>
                                                <t t-if="env.pos.user.groups_id.indexOf(env.pos.config.allow_sh_pos_cancel[0]) != -1">
                                                    <!-- <th></th> -->
                                                    <th class="td_cancel_fronted_order"></th>
                                                </t>
                                                <t t-if="env.pos.user.groups_id.indexOf(env.pos.config.allow_sh_pos_cancel[0]) != -1">
                                                    <!-- <th></th> -->
                                                    <th class="td_cancel_fronted_order"></th>
                                                </t>
                                            </tr>
                                        </thead>







                                        <tbody class="template-list-contents">
                                        
                                            <t t-foreach="posorderdetail" t-as="pos_order" t-key="pos_order.id || pos_order.sh_uid">
                                                <t t-if="pos_order.session_id[0] === ordersession">
                                                <t>
                                                    <!-- <tr 
                                                        t-att-data-id="pos_order.id || pos_order.sh_uid" 
                                                        class="sh_order_line" t-on-click="clickLine"
                                                        t-att-data-order-id="pos_order.id || pos_order.sh_uid"
                                                        t-att-class="pos_order.state === 'draft' ? 'row-new' : (pos_order.state === 'paid' ? 'row-paid' : (pos_order.state === 'invoiced' ? 'row-invoiced' : ''))"
                                                    > -->
                                                    <tr 
                                                        t-att-data-id="pos_order.id || pos_order.sh_uid" 
                                                        class="sh_order_line" t-on-click="clickLine"
                                                        t-att-data-order-id="pos_order.id || pos_order.sh_uid"
                                                        t-att-class="pos_order.state === 'draft' ? 'row-new' : (pos_order.state === 'paid' ? 'row-paid' : (pos_order.state === 'invoiced' ? 'row-invoiced' : ''))"
                                                    >
                                                        <!-- <td class="sh_orderlist_name_td">
                                                            <t t-esc="pos_order.name" />
                                                        </td> -->
                                                        <td class="sh_orderlist_ref_td">
                                                            <t t-esc="pos_order.pos_reference" />
                                                        </td>
                                                        <td class="sh_orderlist_ref_td">
                                                            <t t-if="pos_order.company_order_id">
                                                                <t t-esc="pos_order.company_order_id" />
                                                            </t>
                                                            <t t-else="">
                                                                -
                                                            </t>
                                                        </td>
                                                        <td class="sh_orderlist_customer_td">
                                                            <t t-if="pos_order.partner_id and pos_order.partner_id[1]">
                                                                <t t-esc="pos_order.partner_id[1]" />
                                                            </t>
                                                            <t t-elif="pos_order.partner_id and env.pos.db.get_partner_by_id(pos_order.partner_id) and env.pos.db.get_partner_by_id(pos_order.partner_id).name">
                                                                <t t-esc="env.pos.db.get_partner_by_id(pos_order.partner_id).name" />
                                                            </t>
                                                            <t t-else="">
                                                                -
                                                            </t>
                                                        </td>
                                                        <t t-if="env.pos.config.floor_ids and env.pos.config.floor_ids.length > 0">
                                                            <td class="sh_orderlist_table_td">
                                                                <t t-if="pos_order.table_id[1]">
                                                                    <t t-esc="pos_order.table_id[1]" />
                                                                </t>
                                                                <t t-else="">
                                                                    -
                                                                </t>
                                                            </td>
                                                        </t>
                                                        <td class="x_customer_address">
                                                            <t t-if="pos_order.x_customer_address">
                                                                <t t-esc="pos_order.x_customer_address"/>
                                                            </t>
                                                            <t t-else="">
                                                                -
                                                            </t>
                                                        </td>

                                                        <!-- <td class="x_customer_mobile">
                                                            <t t-if="pos_order.x_customer_mobile">
                                                                <t t-esc="pos_order.x_customer_mobile"/>
                                                            </t>
                                                            <t t-else="">
                                                                -
                                                            </t>
                                                        </td> -->


<td class="x_customer_address" t-att-id="pos_order.id" > 
    <t t-if="pos_order.x_delivery_person_name">
        <t t-esc="pos_order.x_delivery_person_name"/>
    </t>
    <t t-else="">
        -
    </t>
</td>

<!-- <td class="x_customer_address" t-att-id="pos_order.id" t-att-data-order-id="pos_order.id">
    <t t-if="pos_order.x_delivery_person_name">
        <t t-esc="pos_order.x_delivery_person_name" />
    </t>
    <t t-else="">
        <button id="fetchDeliveryPersonsButton" t-on-click="fetchDeliveryPersonsButtonClick">Fetch Delivery Persons</button>
    </t>
</td> -->






                                                        <td class="x_customer_address" id="delivery-status-{order_id}">
                                                            <t t-if="pos_order.x_delivery_status == 'notsend'">
                                                                Not Sent
                                                            </t>
                                                            <t t-if="pos_order.x_delivery_status == 'onway'">
                                                                On Way
                                                            </t>
                                                            <t t-if="pos_order.x_delivery_status == 'delivered'">
                                                                Delivered
                                                            </t>
                                                        </td>
                                                        <td class="sh_orderlist_date_td">
                                                            <t t-if="pos_order.date_order_local">
                                                                <t t-esc="pos_order.date_order_local" />
                                                            </t>
                                                            <t t-else="">
                                                                <t t-esc="pos_order.date_order_local" />
                                                            </t>
                                                        </td>
                                                        <td class="pos_order_total_td sh_orderlist_total_td">
                                                            <t t-esc="env.pos.format_currency(pos_order.amount_total)" />
                                                        </td>
                                                        <td class="pos_order_state sh_orderlist_state_td">
                                                            <t t-if="pos_order.state == 'draft'">
                                                                New
                                                            </t>
                                                            <t t-if="pos_order.state == 'cancel'">
                                                                Cancelled
                                                            </t>
                                                            <t t-if="pos_order.state == 'paid'">
                                                                Paid
                                                            </t>
                                                            <t t-if="pos_order.state == 'done'">
                                                                Posted
                                                            </t>
                                                            <t t-if="pos_order.state == 'invoiced'">
                                                                Invoiced
                                                            </t>
                                                        </td>
<td class="sh_orderlist_print_order_td" t-if="env.pos.config.sh_enable_order_reprint or env.pos.config.sh_enable_re_order">
    <!-- <t t-if="env.pos.config.sh_enable_order_reprint">
        <span class="fa fa-print print_order" aria-hidden="true" t-on-click="print_pos_order" title="Print"></span>
    </t> -->
    <t t-if="env.pos.config.sh_enable_order_reprint  and pos_order.state != 'cancel'">
        <span class="print_order" t-on-click="print_pos_order" title="Print" style="font-size: 18px; cursor: pointer;">🖨️</span>
    </t>

    <!-- <t t-if="env.pos.config.sh_enable_re_order"> -->
        <!-- <t t-if="pos_order.state != 'done' and pos_order.state != 'cancel'"> -->
        <!-- <t t-if="pos_order.x_delivery_status == 'notsend' and pos_order.state != 'cancel'"> 
            <span class="fa fa-edit" aria-hidden="true" t-on-click="reorder_pos_order" title="Edit"></span>
        </t>
    </t> -->
</td>
      
                                                        
                                                        
                                                        
                                                        
                                                        <!-- <t t-if="env.pos.user.groups_id.indexOf(env.pos.config.allow_sh_pos_cancel[0]) != -1"> -->
                                                            <td class="td_cancel_fronted_order">
                                                                <!-- <t t-if="pos_order.state == 'draft' and pos_order.x_delivery_status != 'notsend'"> -->
                                                                <t t-if="pos_order.x_delivery_status == 'onway' and pos_order.state != 'cancel'">    
                                                                    <span title="Paid">
                                                                        <i aria-hidden="true" t-on-click="click_paid" style="font-size: 18px; vertical-align: middle;">💲</i>
                                                                    </span>
                                                                </t>
                                                            </td>
                                                            <!-- <td class="td_cancel_fronted_order">
                                                                <t t-if="pos_order.x_delivery_status != 'delivered' and pos_order.state != 'cancel'">
                                                                    <span title="Cancel">
                                                                        <i class="fa fa-times-circle sh_cancel_delete" aria-hidden="true" t-on-click="click_paid" style="color: red;"></i>
                                                                    </span>
                                                                </t>
                                                            </td> -->
                                                            <td class="td_cancel_fronted_order">
                                                                <!-- <t t-if="pos_order.x_delivery_status != 'delivered' and pos_order.state != 'cancel' and pos_order.state != 'paid'">
                                                                    <span title="Cancel">
                                                                        <span class="sh_cancel_delete" t-on-click="click_print_line" style="color: red; font-size: 18px;">❌</span>
                                                                    </span>
                                                                </t> -->
                                                                <t t-if="state.enable_cancel_button">
    <t t-if="pos_order.x_delivery_status != 'delivered' and pos_order.state != 'cancel' and pos_order.state != 'paid'">
        <span title="Cancel">
            <span class="sh_cancel_delete" t-on-click="click_print_line" style="color: red; font-size: 18px;">❌</span>
        </span>
    </t>
</t>
                                                            </td>
                                                        <!-- </t> -->
                                                    </tr>










                                                    <tr>
                                                        <td colspan="11" class="sh_colspan_11_inner_table">
                                                            <table class="inner_data_table">
                                                                <tr t-att-id="pos_order.pos_reference.split(' ')[1]" class="order_data_row order_data_header">
                                                                    <th class="sh_inner_table_product_th">Product</th>
                                                                    <th class="sh_inner_table_qty_th">Qty.</th>
                                                                    <th class="sh_inner_table_disc_th">Discount (%)</th>
                                                                    <th class="sh_inner_table_unit_price_th">Unit Price</th>
                                                                    <th class="sh_inner_table_sub_total_th">Sub Total</th>
                                                                </tr>

                                                                <t t-foreach="pos_order.lines" t-as="pos_order_line" t-key="pos_order_line">
                                                                    <t t-if="env.pos.db.order_line_by_id and env.pos.db.order_line_by_id[pos_order_line]">
                                                                        <tr t-att-id="env.pos.db.order_line_by_id[pos_order_line].id" class="order_data_row order-data sh_inner_table_data_row">
                                                                            <td class="sh_inner_table_product_td">
                                                                                <t t-esc="env.pos.db.order_line_by_id[pos_order_line].product_id[1]" />
                                                                                <t t-if="!env.pos.db.get_product_by_id(env.pos.db.order_line_by_id[pos_order_line].product_id[0])">
                                                                                    <span style="color: red;"> ( Not available in POS . Please update product. )</span>
                                                                                </t>
                                                                            </td>

                                                                            <td class="sh_inner_table_qty_td">
                                                                                <t t-if="env.pos.db.get_product_by_id(env.pos.db.order_line_by_id[pos_order_line].product_id[0])">
                                                                                    <t t-esc="env.pos.db.order_line_by_id[pos_order_line].qty" />
                                                                                </t>
                                                                            </td>
                                                                            <td class="sh_inner_table_disc_td">
                                                                                <t t-if="env.pos.db.get_product_by_id(env.pos.db.order_line_by_id[pos_order_line].product_id[0])">
                                                                                    <t t-esc="env.pos.db.order_line_by_id[pos_order_line].discount" />
                                                                                </t>
                                                                            </td>
                                                                            <td class="sh_inner_table_unit_price_td">
                                                                                <t t-if="env.pos.db.get_product_by_id(env.pos.db.order_line_by_id[pos_order_line].product_id[0])">
                                                                                    <t t-if="env.pos.db.get_product_by_id(env.pos.db.order_line_by_id[pos_order_line].product_id[0]) and env.pos.db.get_product_by_id(env.pos.db.order_line_by_id[pos_order_line].product_id[0]).lst_price">
                                                                                        <t t-esc="env.pos.format_currency(env.pos.db.get_product_by_id(env.pos.db.order_line_by_id[pos_order_line].product_id[0]).lst_price)" />
                                                                                    </t>
                                                                                </t>
                                                                            </td>
                                                                            <td class="sh_inner_table_sub_total_td">
                                                                                <t t-if="env.pos.db.get_product_by_id(env.pos.db.order_line_by_id[pos_order_line].product_id[0])">
                                                                                    <t t-esc="env.pos.format_currency(env.pos.db.order_line_by_id[pos_order_line].qty * env.pos.db.order_line_by_id[pos_order_line].price_unit)" />
                                                                                </t>
                                                                            </td>
                                                                        </tr>
                                                                    </t>
                                                                    <tr t-if="pos_order.sh_line_id" t-att-id="env.pos.db.order_line_by_id[pos_order_line[2].sh_line_id].sh_line_id" class="order_data_row order-data sh_inner_table_data_row">
                                                                        <td>
                                                                            <t t-esc="env.pos.db.order_line_by_id[pos_order_line[2].sh_line_id].full_product_name" />
                                                                        </td>
                                                                        <td>
                                                                            <t t-esc="pos_order_line[2].qty" />
                                                                        </td>
                                                                        <td>
                                                                            <t t-esc="pos_order_line[2].discount" />
                                                                        </td>
                                                                        <td>
                                                                            <t t-esc="pos_order_line[2].price_unit" />
                                                                        </td>
                                                                        <td>
                                                                            <t t-esc="pos_order_line[2].price_subtotal" />
                                                                        </td>
                                                                    </tr>
                                                                </t>

                                                            </table>
                                                        </td>
                                                    </tr>
                                                </t>
                                            </t>
                                            </t>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </section>
                    </div>
                </section>
                <div class="sh_pagination"></div>
            </div>
        </div>
    </t>
</templates>